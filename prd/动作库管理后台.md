# 产品需求文档 (PRD) - 动作库管理后台

## 1. 文档修订历史

| 版本号 | 修订日期   | 修订人 | 修订内容         |
| ------ | ---------- | ------ | ---------------- |
| V1.0   | YYYY-MM-DD | Trae AI | 初稿创建         |
|        |            |        | [请在此处记录后续修订] |

## 2. 引言

### 2.1. 项目背景
[请在此处填写项目背景，例如：为了满足XX业务发展需求，提升动作内容管理效率与质量，特规划建设动作库管理后台。]

### 2.2. 产品目标
*   高效管理和维护动作库中的所有动作资源。
*   提供清晰、便捷的动作分类、检索和编辑功能。
*   确保动作数据的准确性和一致性。
*   [请在此处添加针对新功能的具体目标]

### 2.3. 目标用户
*   内容管理员：负责动作的录入、编辑、分类和审核。
*   运营人员：负责动作的上下架、推荐等运营配置。
*   系统管理员：负责后台用户权限管理和系统维护。

## 3. 整体业务流程概述
[请在此处使用流程图或文字描述整体业务流程，例如：内容管理员通过后台上传/编辑动作信息 -> 系统进行数据校验与存储 -> 动作数据同步至前端应用供用户查看和使用。]

## 4. 功能需求详述

### 4.1. 模块划分

#### 4.1.1. 动作管理模块

*   **核心功能**:
    *   创建新动作：支持录入动作的基本信息、详细描述、关联媒体（图片/视频）、分类标签等。
    *   编辑动作：支持修改已存在的动作信息。
    *   查看动作：展示动作列表，并可查看单个动作的详细信息。
    *   删除动作：支持逻辑删除或物理删除动作（需明确）。
    *   查询/筛选动作：支持根据动作名称、分类、标签、状态等条件进行查询和筛选。
    *   动作上下架：控制动作在前台的可见性。
*   **基本流程 (以“创建新动作”为例)**:
    1.  用户点击“新增动作”按钮。
    2.  系统展示新增动作表单页面。
    3.  用户填写动作名称、描述、选择分类、上传媒体文件等信息。
    4.  用户点击“保存”按钮。
    5.  系统校验表单数据的完整性和合规性。
    6.  校验通过，系统保存动作数据至数据库。
    7.  系统提示用户“创建成功”并跳转至动作列表页或详情页。
    8.  校验失败，系统在表单相应位置提示错误信息。
*   **字段说明 (动作核心表)**:

    | 字段名          | 数据类型     | 是否必填 | 长度限制 | 描述/示例                                  | 备注                       |
    | --------------- | ------------ | -------- | -------- | ------------------------------------------ | -------------------------- |
    | `action_id`     | BIGINT       | 是 (主键) |          | 动作唯一标识符 (系统生成)                  | 自增ID                     |
    | `action_name`   | VARCHAR      | 是       | 255      | 动作名称，如“标准俯卧撑”                   |                            |
    | `description`   | TEXT         | 否       |          | 动作详细描述、要点、注意事项               | 支持富文本编辑器           |
    | `category_id`   | INT          | 是       |          | 所属分类ID (外键关联分类表)                |                            |
    | `tags`          | VARCHAR      | 否       | 500      | 标签，多个标签用逗号分隔，如“胸肌,核心”    |                            |
    | `difficulty`    | TINYINT      | 否       |          | 难度级别 (1:初级, 2:中级, 3:高级)          | 可扩展枚举值               |
    | `cover_image_url`| VARCHAR      | 否       | 500      | 封面图片URL                                |                            |
    | `video_url`     | VARCHAR      | 否       | 500      | 教学视频URL                                |                            |
    | `duration_seconds`| INT          | 否       |          | 建议单次持续时长 (秒)                      |                            |
    | `calories_burned`| INT          | 否       |          | 预估消耗卡路里 (每组/每分钟)               |                            |
    | `status`        | TINYINT      | 是       |          | 状态 (0:草稿, 1:已上架, 2:已下架)          | 默认为0                    |
    | `created_by`    | VARCHAR      | 是       | 100      | 创建人用户名                               |                            |
    | `created_at`    | TIMESTAMP    | 是       |          | 创建时间 (系统生成)                        |                            |
    | `updated_by`    | VARCHAR      | 否       | 100      | 最后修改人用户名                           |                            |
    | `updated_at`    | TIMESTAMP    | 是       |          | 最后修改时间 (系统生成，创建时同创建时间)  |                            |
    | `[新功能字段1]` | [数据类型]   | [是/否]  | [长度]   | [新功能相关字段描述]                       | [备注]                     |
    | `[新功能字段2]` | [数据类型]   | [是/否]  | [长度]   | [新功能相关字段描述]                       | [备注]                     |

#### 4.1.2. 分类管理模块

*   **核心功能**:
    *   创建分类：支持添加新的动作分类，如“胸部训练”、“腿部训练”。
    *   编辑分类：修改分类名称、描述。
    *   删除分类：删除分类（需考虑分类下有动作时的处理逻辑，如禁止删除或将动作迁移）。
    *   查看分类列表。
*   **基本流程**: 类似于动作管理模块的CRUD流程。
*   **字段说明 (分类表)**:
    | 字段名          | 数据类型     | 是否必填 | 描述             |
    | --------------- | ------------ | -------- | ---------------- |
    | `category_id`   | INT          | 是 (主键) | 分类唯一标识符   |
    | `category_name` | VARCHAR(100) | 是       | 分类名称         |
    | `parent_id`     | INT          | 否       | 父分类ID (支持层级)|
    | `description`   | VARCHAR(255) | 否       | 分类描述         |
    | `sort_order`    | INT          | 否       | 显示排序         |

#### 4.1.3. 用户与权限管理模块 (可选，若已有统一后台则可集成)

*   **核心功能**: 管理后台系统的用户账户、角色及各角色对不同模块的操作权限。
*   **基本流程**: 创建用户、分配角色、配置角色权限等。
*   **字段说明**: 涉及用户表、角色表、权限表、用户角色关联表、角色权限关联表。

#### 4.1.4. [新功能模块名称]
*   **核心功能**: [请详细描述新功能模块的核心职责和能力]
*   **基本流程**: [请描述新功能模块的主要操作流程]
*   **字段说明**: [请列出新功能模块涉及的主要数据表及字段]

### 4.2. 业务流程详解

#### 4.2.1. 正常业务流程示例：管理员编辑并上架一个动作

1.  **用户操作**:
    *   管理员登录后台系统。
    *   导航至“动作管理”模块，进入动作列表页。
    *   通过搜索或筛选找到目标动作，点击该动作对应的“编辑”按钮。
2.  **系统响应**:
    *   系统加载该动作的现有数据，并展示在编辑表单中。
    *   表单元素（如输入框、下拉选择、图片上传器）均填充了当前动作的信息。
3.  **用户操作**:
    *   管理员修改动作的描述信息，例如补充了动作要点。
    *   管理员将动作状态从“草稿”修改为“已上架”。
    *   管理员点击“保存”按钮。
4.  **系统响应与数据处理**:
    *   系统接收到表单提交的数据。
    *   **数据校验**:
        *   检查必填项（如动作名称）是否为空。
        *   检查数据格式（如URL格式是否正确）。
        *   [针对新功能的特定校验规则]。
    *   校验通过后，系统更新数据库中对应动作记录的描述和状态字段。
    *   记录操作日志（谁在什么时间修改了什么动作）。
5.  **反馈呈现**:
    *   系统在页面顶部显示“动作更新成功并已上架”的成功提示消息（例如，绿色背景的toast提示）。
    *   页面跳转回动作列表页，列表中该动作的状态已更新为“已上架”。
    *   （可选）如果修改了影响前端展示的重要信息，可能触发缓存更新机制。

#### 4.2.2. 异常情况处理

*   **网络中断**:
    *   **用户操作时**: 用户提交表单时网络中断。
    *   **系统响应**: 前端应有超时机制和重试逻辑（可选，根据重要性）。若无法连接服务器，应提示用户“网络连接失败，请检查网络后重试”。
    *   **数据处理**: 若请求未到达服务器，无数据变更。若部分到达，需考虑事务回滚。
    *   **反馈呈现**: 明确的错误提示。
*   **数据错误/校验失败**:
    *   **用户操作时**: 用户提交的表单数据不符合预设规则（如必填项未填，格式错误）。
    *   **系统响应**: 服务器端校验不通过。
    *   **数据处理**: 不执行数据保存或更新操作。
    *   **反馈呈现**: 在表单页面相应字段下方或页面顶部，高亮显示错误字段并给出明确的错误提示信息，例如“动作名称不能为空”、“请输入有效的视频URL”。用户已填写的数据应保留在表单中，方便用户修改。
*   **服务器内部错误 (5xx错误)**:
    *   **用户操作时**: 用户进行任何操作。
    *   **系统响应**: 服务器发生未捕获的异常。
    *   **数据处理**: 理想情况下，关键操作应有事务保证数据一致性。记录详细错误日志供排查。
    *   **反馈呈现**: 向用户显示通用错误页面或提示“系统繁忙，请稍后再试”，避免暴露敏感错误信息。
*   **权限不足**:
    *   **用户操作时**: 用户尝试访问或操作其没有权限的功能（如普通内容管理员尝试删除用户）。
    *   **系统响应**: 后端权限校验拦截该操作。
    *   **数据处理**: 不执行任何操作。
    *   **反馈呈现**: 提示用户“您没有执行此操作的权限”或直接隐藏无权限的操作入口。
*   **并发操作冲突 (例如，多人同时编辑同一动作)**:
    *   **处理机制**:
        *   **乐观锁**: 用户提交时检查数据版本号，若版本号已变更，则提示用户“数据已被他人修改，请刷新后重试”。
        *   **悲观锁**: 用户进入编辑页面即锁定该条记录（不推荐，影响并发性能）。
        *   **最后提交者获胜**: 简单粗暴，但可能导致数据覆盖。

## 5. 交互设计 (UI/UX)

### 5.1. 页面布局与元素

*   **整体布局**:
    *   采用常见的后台管理系统布局：顶部导航栏（Logo、用户信息、退出登录）、左侧菜单栏（各功能模块入口）、主内容区。
    *   主内容区通常包含：面包屑导航、操作按钮区域（如新增、批量删除）、数据列表/表单区域、分页控件。
*   **列表页 (以动作列表为例)**:
    *   **数据展示**: 表格形式，列包括：ID、动作名称、封面缩略图、所属分类、状态、创建时间、操作（编辑、删除、查看详情、上下架等按钮）。
    *   **筛选区域**: 位于列表上方，提供输入框（按名称搜索）、下拉选择器（按分类、状态筛选）。
    *   **操作按钮**: “新增动作”按钮通常醒目展示。列表每行的操作按钮应清晰明了。
*   **表单页 (以新增/编辑动作为例)**:
    *   **布局**: 字段从上到下排列，相关字段可分组。复杂表单可使用Tab页或步骤条。
    *   **元素**:
        *   输入框 (`<input type="text">`): 用于名称、标签等。
        *   文本域 (`<textarea>`): 用于详细描述，可集成富文本编辑器。
        *   下拉选择器 (`<select>`): 用于分类、难度、状态等固定选项。
        *   文件上传器: 用于上传图片、视频，应有预览功能和上传进度提示。
        *   日期时间选择器: 用于选择特定日期（如适用）。
        *   按钮: “保存”、“保存并继续添加”、“取消”、“重置”等。

### 5.2. 交互动作与反馈

*   **按钮点击态**:
    *   **Normal**: 正常显示。
    *   **Hover**: 鼠标悬停时，按钮背景色/边框色/文字颜色发生变化，给用户可点击的视觉反馈。
    *   **Active/Pressed**: 鼠标按下时，按钮有更明显的变化（如内陷效果或颜色加深）。
    *   **Disabled**: 不可用状态，按钮置灰，鼠标指针变为禁用样式，不可点击。
*   **弹窗显示规则**:
    *   **确认弹窗 (Confirm Dialog)**: 用于删除、下架等敏感操作前，向用户确认。包含操作说明、确认按钮、取消按钮。例如：“您确定要删除动作「XXX」吗？此操作不可恢复。”
    *   **消息提示 (Toast/Notification)**: 用于操作成功（如“保存成功”）、失败（如“网络错误”）、警告等。通常在页面顶部或角落短暂显示后自动消失。成功用绿色，失败用红色，警告用黄色。
    *   **模态框 (Modal)**: 用于展示更复杂的信息或需要用户输入的独立任务，如查看动作详情的完整信息、进行某些高级配置。模态框出现时，背景通常会变暗，用户需处理完模态框内容才能与页面其他部分交互。
*   **页面跳转逻辑**:
    *   列表页点击“新增” -> 跳转至新增表单页。
    *   表单页点击“保存”成功 -> 跳转回列表页（并刷新）或详情页。
    *   表单页点击“取消” -> 返回上一页（通常是列表页），不保存任何更改。
    *   点击分页控件 -> 列表数据刷新，URL参数可能变化，页面不完全重载。
*   **数据加载与等待**:
    *   进入页面或执行操作（如搜索、保存）导致数据加载时，应有加载指示器（如Spinner、进度条），避免用户以为页面卡死。
    *   对于耗时较长的操作，加载指示器应更明显，并可考虑禁用相关操作按钮，防止重复提交。
*   **表单校验反馈**:
    *   **实时校验 (可选)**: 用户输入离开焦点时，即时校验该字段，若有误则在字段旁显示错误提示。
    *   **提交时校验**: 点击保存按钮后，对整个表单进行校验。错误信息显示在对应字段下方或表单顶部汇总。错误字段应有视觉提示（如红色边框）。
*   **[新功能的特定交互设计]**:
    *   [描述新功能涉及的独特页面元素布局]
    *   [描述新功能特有的交互触发条件，例如拖拽、特定手势等]
    *   [描述新功能操作后的反馈效果，例如即时预览、状态变化等]

## 6. 非功能性需求

### 6.1. 性能需求
*   列表页加载时间：在xx并发用户下，95%的请求应在X秒内响应。
*   表单提交响应时间：95%的请求应在Y秒内完成。
*   [针对新功能的性能指标]

### 6.2. 安全需求
*   用户认证：采用[具体认证方式，如Token认证、OAuth2]。
*   权限控制：严格按照角色分配操作权限，防止越权操作。
*   数据防伪：对用户输入进行严格过滤和转义，防止XSS、SQL注入等攻击。
*   操作日志：关键操作（增删改、上下架、登录等）需记录日志。

### 6.3. 易用性需求
*   界面简洁直观，符合用户操作习惯。
*   重要操作有二次确认，防止误操作。
*   提供必要的帮助文档或操作指引。

### 6.4. 兼容性需求
*   浏览器兼容性：支持主流浏览器最新版本（如Chrome, Firefox, Safari, Edge）。
*   [若有移动端管理需求，需考虑响应式设计或独立移动版]

## 7. [新功能名称] - 详细需求
[此部分专门用于详细阐述您提到的“新功能开发需求”。请在此处补充：]
*   **7.1. 新功能概述与目标**
*   **7.2. 新功能详细流程图/用例**
*   **7.3. 新功能涉及的模块交互（如果跨模块）**
*   **7.4. 新功能特有的字段、校验规则、交互逻辑等**
*   **7.5. 新功能验收标准**

## 8. 待定与未来规划
*   [列出当前版本未包含，但未来可能考虑的功能点]
*   [记录讨论中尚未明确的需求点]

## 9. 附录
*   [相关文档链接、原型图链接、UI设计稿链接等]

---

**请注意**:
*   本文档是一个通用模板，请根据您的具体“新功能开发需求”和实际业务场景进行详细填充和调整。
*   特别是第4.1.1、4.1.4、4.2.1、5.2、7章节中带有 `[新功能...]` 或 `[请在此处...]` 标记的部分，需要您提供更具体的信息。
*   字段的数据类型、长度限制等应根据实际数据库设计和业务需求确定。
*   交互设计部分可以配合原型图或UI设计稿进行更直观的说明。

希望这份PRD框架能帮助您梳理需求！如果您能提供更具体的新功能信息，我可以进一步完善相关章节。